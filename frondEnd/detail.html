<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="pub-7730946066495644">
    <title>Kobot Pick 상세 분석</title>
    <script>
        window.KOBOT_API_BASE_URL = "https://kobotpick.onrender.com/api/v1/";
    </script>
    <!-- Google AdSense auto ads -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=pub-7730946066495644" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://unpkg.com/lightweight-charts@4.2.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>

<div id="loading" class="loading">Kobot이 분석 중입니다...</div>

<div id="skeleton-detail" class="skeleton-detail" style="display: none;">
    <div class="skeleton-header">
        <div class="ske-line wide"></div>
        <div class="ske-line mid"></div>
    </div>
    <div class="skeleton-price-box">
        <div class="ske-pill"></div>
        <div class="ske-pill"></div>
        <div class="ske-pill"></div>
    </div>
    <div class="ske-chart"></div>
    <div class="skeleton-grid">
        <div class="ske-card"></div>
        <div class="ske-card"></div>
        <div class="ske-card"></div>
        <div class="ske-card"></div>
        <div class="ske-card"></div>
        <div class="ske-card"></div>
    </div>
    <div class="ske-news">
        <div class="ske-line wide"></div>
        <div class="ske-line mid"></div>
        <div class="ske-line short"></div>
    </div>
</div>

<div id="content" style="display: none;">
    <div class="header">
        <div class="company-title">
            <div id="company-name" class="company-name"></div>
            <div id="ticker-pill" class="ticker-pill"></div>
            <button id="fav-toggle" class="fav-btn" type="button">☆ 즐겨찾기</button>
        </div>
        <p id="current-price"></p>
        <select id="lang-select-detail" class="lang-select">
            <option value="ko">한국어</option>
            <option value="en">English</option>
            <option value="ja">日本語</option>
            <option value="zh">中文</option>
        </select>
    </div>

    <div class="price-box">
        <div class="price-item">
            <h3>매수가 (BUY)</h3>
            <p id="buy-price" class="buy"></p>
        </div>
        <div class="price-item">
            <h3>목표가 (SELL)</h3>
            <p id="sell-price" class="sell"></p>
        </div>
        <div class="price-item">
            <h3>손절가 (STOP)</h3>
            <p id="stop-loss" class="sell"></p>
        </div>
    </div>

    <div class="rationale">
        <h4>Kobot 분석 근거 (<span id="action"></span>)</h4>
        <p id="rationale-text"></p>
    </div>

    <div id="chart-area">
        [전문 캔들 차트가 렌더링될 위치]
    </div>

    <div id="fundamentals-grid" class="data-grid"></div>

    <div id="profile-section" class="profile-section">
        <h4>기업 정보</h4>
        <ul class="profile-list" id="profile-list"></ul>
    </div>

    <div id="news-section" class="news-section">
        <h4>관련 뉴스</h4>
        <ul id="news-list" class="news-list"></ul>
    </div>

    <p class="disclaimer">이 정보는 AI 알고리즘에 의한 참고용이며, 모든 투자 결정 및 책임은 사용자 본인에게 있습니다.</p>
</div>

<!-- Firebase Analytics: index와 동일하게 적용 -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAnalytics, logEvent } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-analytics.js";

    const firebaseConfig = {
        apiKey: "AIzaSyC9sChjp1QM263w9Guv76DvJ8lptRgG3rA",
        authDomain: "kobotpick.firebaseapp.com",
        projectId: "kobotpick",
        storageBucket: "kobotpick.firebasestorage.app",
        messagingSenderId: "194944764478",
        appId: "1:194944764478:web:d875664bc7670a99a9df6f",
        measurementId: "G-BTLSBL36Y3",
    };

    try {
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        logEvent(analytics, "page_view");
    } catch (err) {
        console.error("Firebase init failed:", err);
    }
</script>

<script src="js/chart_renderer.js"></script>
<script src="js/stock_detail.js"></script>
</body>
</html>
