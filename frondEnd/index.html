<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="pub-7730946066495644">
    <title>Kobot Pick 대시보드</title>

    <!-- PropellerAds (한국 트래픽 수익 1위) -->
    <script src="https://www.profitabledisplaynetwork.com/8c9c68c7f6d7e7b5f4d3c2b1a0.js" async></script>
    <script>
        (adsbypropeller = window.adsbypropeller || []).push({});
    </script>

    <!-- Google AdSense 자동 광고 -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=pub-7730946066495644" crossorigin="anonymous"></script>
    <script>
        // auto ads는 페이지당 1회만 enable_page_level_ads를 호출해야 함
        if (!window.__kobot_auto_ads_initialized) {
            (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "pub-7730946066495644",
                enable_page_level_ads: true,
                overlays: {bottom: true}
            });
            window.__kobot_auto_ads_initialized = true;
        }
    </script>

    <!-- 백엔드 API 베이스 URL (배포용) -->
    <script>
        window.KOBOT_API_BASE_URL = "https://kobotpick.onrender.com/api/v1/";
        // 페이지 로딩 시 Render 백엔드를 먼저 깨워서 콜드 스타트 지연을 줄임
        fetch("https://kobotpick.onrender.com/warmup").catch(() => {});
    </script>

    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div class="hero">
    <div>
        <p class="eyebrow" id="eyebrow-text">Kobot Pick</p>
        <h1 id="hero-title">오늘의 AI 추천 포트폴리오</h1>
        <p class="sub" id="hero-sub">해외/국내/ETF 추천을 한 번에 확인하세요.</p>
    </div>
    <div class="hero-actions">
        <select id="lang-select" class="lang-select">
            <option value="ko">한국어</option>
            <option value="en">English</option>
            <option value="ja">日本語</option>
            <option value="zh">中文</option>
        </select>
        <div class="hero-badge" id="hero-live">Live</div>
    </div>
</div>

<!-- 글로벌 뉴스 티커 -->
<div class="headline-bar">
    <div class="headline-label">Top News</div>
    <div id="headline-track" class="headline-track"></div>
</div>

<!-- 검색 -->
<div class="search-fav-bar">
    <div class="search-box">
        <input id="ticker-search" type="text" placeholder="티커를 입력하세요 (예: AAPL, 005930)">
        <button id="search-btn" type="button">검색</button>
    </div>
</div>

<!-- 즐겨찾기 -->
<div class="favorites-section">
    <div class="section-title">즐겨찾기</div>
    <div id="favorites-list" class="card-container"></div>
</div>

<div id="loading" class="loading">추천 종목을 분석 중입니다...</div>

<section class="section">
    <div id="market-snapshot" class="market-snapshot"></div>
    <div class="section-title" id="section-us">해외 추천 Top 5</div>
    <div id="us-picks" class="card-container"></div>
</section>

<section class="section">
    <div class="section-title" id="section-kr">국내 추천 Top 5</div>
    <div id="kr-picks" class="card-container"></div>
</section>

<section class="section">
    <div class="section-title" id="section-etf">ETF 추천 Top 5</div>
    <div id="etf-picks" class="card-container"></div>
</section>

<p class="disclaimer" id="disclaimer">
    이 정보는 AI 알고리즘에 의한 참고용이며, 투자 결정 및 책임은 본인에게 있습니다.
</p>

<!-- Firebase Analytics -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAnalytics, logEvent } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-analytics.js";

    const firebaseConfig = {
        apiKey: "AIzaSyC9sChjp1QM263w9Guv76DvJ8lptRgG3rA",
        authDomain: "kobotpick.firebaseapp.com",
        projectId: "kobotpick",
        storageBucket: "kobotpick.firebasestorage.app",
        messagingSenderId: "194944764478",
        appId: "1:194944764478:web:d875664bc7670a99a9df6f",
        measurementId: "G-BTLSBL36Y3",
    };

    try {
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        logEvent(analytics, "page_view");
    } catch (err) {
        console.error("Firebase init failed:", err);
    }
</script>

<script src="js/main_dashboard.js"></script>
</body>
</html>
